(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{117:function(e,t,a){"use strict";a.r(t);var n=a(1),c=a.n(n),r=a(45),s=a.n(r),o=a(17),i=a(51),u=(a(82),a(29)),l=a(7),j=a(42),d=a.n(j),p=a(49),b=a.n(p),m=a(0),h=function(e){var t=e.title,a=e.icon,n=e.children;return Object(m.jsxs)("div",{className:b.a.card,children:[Object(m.jsxs)("div",{className:b.a.headingWrapper,children:[a&&Object(m.jsx)("img",{src:"/images/".concat(a,".png"),alt:"logo"}),t&&Object(m.jsx)("h1",{className:b.a.heading,children:t})]}),n]})},f=a(56),O=a.n(f),x=function(e){var t=e.text,a=e.onClick;return Object(m.jsxs)("button",{onClick:a,className:O.a.button,children:[Object(m.jsx)("span",{children:t}),Object(m.jsx)("img",{className:O.a.arrow,src:"/images/arrow-forward.png",alt:"arrow"})]})},v=function(){var e=Object(l.g)();return Object(m.jsx)("div",{className:d.a.cardWrapper,children:Object(m.jsxs)(h,{title:"Welcome to Edu-Voice!",icon:"logo",children:[Object(m.jsx)("p",{className:d.a.text,children:"We\u2019re working hard to get Edu-Voice ready for everyone! While we wrap up the finishing youches, we\u2019re adding people gradually to make sure nothing breaks"}),Object(m.jsx)("div",{children:Object(m.jsx)(x,{onClick:function(){e.push("/authenticate")},text:"Let's Go"})}),Object(m.jsx)("div",{className:d.a.signinWrapper,children:Object(m.jsx)("span",{className:d.a.hasInvite,children:"Have an invite text?"})})]})})},g=a(3),_=a.n(g),N=a(6),k=a(4),y=a(41),C=a.n(y),R=C.a.create({baseURL:"http://localhost:5000",withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json"}}),w=function(e){return R.post("/api/send-otp",e)},B=function(e){return R.post("/api/verify-otp",e)},S=function(e){return R.post("/api/activate",e)},W=function(){return R.post("/api/logout")},I=function(e){return R.post("/api/rooms",e)},A=function(e){return R.get("/api/rooms/".concat(e))};R.interceptors.response.use((function(e){return e}),function(){var e=Object(N.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.config,401!==t.response.status||!a||a._isRetry){e.next=12;break}return a.isRetry=!0,e.prev=3,e.next=6,C.a.get("".concat("http://localhost:5000","/api/refresh"),{withCredentials:!0});case 6:return e.abrupt("return",R.request(a));case 9:e.prev=9,e.t0=e.catch(3),console.log(e.t0.message);case 12:throw t;case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}());var E=a(36),P=Object(E.b)({name:"auth",initialState:{isAuth:!1,user:null,otp:{phone:"",hash:""}},reducers:{setAuth:function(e,t){var a=t.payload.user;e.user=a,e.isAuth=null!==a},setOtp:function(e,t){var a=t.payload,n=a.phone,c=a.hash;e.otp.phone=n,e.otp.hash=c}}}),L=P.actions,T=L.setAuth,H=L.setOtp,M=P.reducer,F=a(43),D=a.n(F),U=function(){var e=Object(k.b)(),t=Object(k.c)((function(e){return e.auth})),a=t.isAuth,n=t.user;function c(){return(c=Object(N.a)(_.a.mark((function t(){var a,n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,W();case 3:a=t.sent,n=a.data,e(T(n)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return Object(m.jsxs)("nav",{className:"".concat(D.a.navbar," container"),children:[Object(m.jsx)(u.b,{style:{color:"#fff",textDecoration:"none",fontWeight:"bold",fontSize:"22px",display:"flex",alignItems:"center"},to:"/",children:Object(m.jsx)("span",{style:{marginLeft:"10px",marginBottom:"10px"},children:"Edu-Voice"})}),a&&Object(m.jsxs)("div",{className:D.a.navRight,children:[Object(m.jsx)("h3",{children:null===n||void 0===n?void 0:n.name}),Object(m.jsx)(u.b,{to:"/",className:D.a.avatar,children:Object(m.jsx)("img",{src:n.avatar?n.avatar:"/images/monkey-avatar.png",width:"40",alt:"photoes",height:"40"})}),Object(m.jsx)("button",{className:D.a.logoutButton,onClick:function(){return c.apply(this,arguments)},children:Object(m.jsx)("img",{src:"/images/logout.png",alt:"logout"})})]})]})},q=a(2),z=a(16),J=a.n(z),V=a(73),Z=a.n(V),Q=function(e){return Object(m.jsx)("input",Object(o.a)({className:Z.a.input,style:{width:"true"===e.fullwidth?"100%":""},type:"text"},e))},X={phone:function(e){var t=e.onNext,a=Object(n.useState)(""),c=Object(q.a)(a,2),r=c[0],s=c[1],o=Object(k.b)();function i(){return(i=Object(N.a)(_.a.mark((function e(){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w({phone:r});case 2:a=e.sent,n=a.data,console.log(n),o(H({phone:n.phone,hash:n.hash})),t();case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(m.jsxs)(h,{title:"Enter your phone number",icon:"phone-icon",children:[Object(m.jsx)(Q,{value:r,onChange:function(e){return s(e.target.value)}}),Object(m.jsxs)("div",{className:J.a.midWrapper,children:[Object(m.jsx)("div",{className:J.a.actionButtonWrap,children:Object(m.jsx)(x,{text:"Next",onClick:function(){return i.apply(this,arguments)}})}),Object(m.jsx)("p",{className:J.a.bottomPara,children:"By entering your number, you\u2019re agreeing to our Terms of Service and Privacy Policy. Thanks!"})]})]})},email:function(e){var t=e.onNext,a=Object(n.useState)(""),c=Object(q.a)(a,2),r=c[0],s=c[1];return Object(m.jsxs)(h,{title:"Enter your email id",icon:"email-icon",children:[Object(m.jsx)(Q,{value:r,onChange:function(e){return s(e.target.value)}}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:J.a.actionButtonWrap,children:Object(m.jsx)(x,{text:"Next",onClick:t})}),Object(m.jsx)("p",{className:J.a.bottomPara,children:"By entering your number, you\u2019re agreeing to our Terms of Service and Privacy Policy. Thanks!"})]})]})}},G=function(e){var t=e.onNext,a=Object(n.useState)("phone"),c=Object(q.a)(a,2),r=c[0],s=c[1],o=X[r];return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:J.a.cardWrapper,children:Object(m.jsxs)("div",{children:[Object(m.jsxs)("div",{className:J.a.buttonWrap,children:[Object(m.jsx)("button",{className:"".concat(J.a.tabButton," ").concat("phone"===r?J.a.active:""),onClick:function(){s("phone")},children:Object(m.jsx)("img",{src:"/images/phone-icon.png",alt:"Phone"})}),Object(m.jsx)("button",{className:"".concat(J.a.tabButton," ").concat("email"===r?J.a.active:""),onClick:function(){s("email")},children:Object(m.jsx)("img",{src:"/images/email-icon.png",alt:"Email"})})]}),Object(m.jsx)(o,{onNext:t})]})})})},Y=a(50),K=a.n(Y),$={1:G,2:function(e){e.onNext;var t=Object(n.useState)(""),a=Object(q.a)(t,2),c=a[0],r=a[1],s=Object(k.b)(),o=Object(k.c)((function(e){return e.auth.otp})),i=o.phone,u=o.hash;function l(){return(l=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&i&&u){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,B({otp:c,phone:i,hash:u});case 5:t=e.sent,a=t.data,console.log(a),s(T(a)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))).apply(this,arguments)}return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:K.a.cardWrapper,children:Object(m.jsxs)(h,{title:"Enter your OTP",icon:"lock",children:[Object(m.jsx)(Q,{value:c,onChange:function(e){return r(e.target.value)}}),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:K.a.actionButtonWrap,children:Object(m.jsx)(x,{onClick:function(){return l.apply(this,arguments)},text:"Next"})}),Object(m.jsx)("p",{className:K.a.bottomPara,children:"By entering your number, you\u2019re agreeing to our Terms of Service and Privacy Policy. Thanks!"})]})]})})})}},ee=function(){var e=Object(n.useState)(1),t=Object(q.a)(e,2),a=t[0],c=t[1],r=$[a];return Object(m.jsx)(r,{onNext:function(){c(a+1)}})},te=Object(E.b)({name:"activate",initialState:{name:"",avatar:""},reducers:{setName:function(e,t){e.name=t.payload},setAvatar:function(e,t){e.avatar=t.payload}}}),ae=te.actions,ne=ae.setName,ce=ae.setAvatar,re=te.reducer,se=a(74),oe=a.n(se),ie=function(e){var t=e.onNext,a=Object(k.c)((function(e){return e.activate})).name,c=Object(k.b)(),r=Object(n.useState)(a),s=Object(q.a)(r,2),o=s[0],i=s[1];return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(h,{title:"What\u2019s your full name?",icon:"goggle-emoji",children:[Object(m.jsx)(Q,{value:o,onChange:function(e){return i(e.target.value)}}),Object(m.jsx)("p",{className:oe.a.paragraph,children:"People use real names at codershouse :) !"}),Object(m.jsx)("div",{children:Object(m.jsx)(x,{onClick:function(){o&&(c(ne(o)),t())},text:"Next"})})]})})},ue=a(37),le=a.n(ue),je=a(59),de=a.n(je),pe=function(e){var t=e.message;return Object(m.jsx)("div",{className:"cardWrapper",children:Object(m.jsxs)(h,{children:[Object(m.jsxs)("svg",{className:de.a.spinner,width:"42",height:"42",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(m.jsx)("circle",{cx:"21",cy:"21",r:"18",stroke:"#C4C5C5",strokeWidth:"4"}),Object(m.jsx)("path",{d:"M20.778 1.001A20 20 0 111.542 25.627l3.876-.922a16.016 16.016 0 1015.404-19.72l-.044-3.984z",fill:"#5453E0"})]}),Object(m.jsx)("span",{className:de.a.message,children:t})]})})},be={1:ie,2:function(e){e.onNext;var t=Object(k.b)(),a=Object(k.c)((function(e){return e.activate})),c=a.name,r=a.avatar,s=Object(n.useState)(!1),o=Object(q.a)(s,2),i=o[0],u=o[1],l=Object(n.useState)("/images/monkey-avatar.png"),j=Object(q.a)(l,2),d=j[0],p=j[1],b=Object(n.useState)(!1),f=Object(q.a)(b,2),O=f[0],v=f[1];function g(){return(g=Object(N.a)(_.a.mark((function e(){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(c&&r){e.next=2;break}return e.abrupt("return");case 2:return u(!0),e.prev=3,e.next=6,S({name:c,avatar:r});case 6:a=e.sent,(n=a.data).auth&&(O||t(T(n))),u(!1),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(3),console.log(e.t0);case 15:return e.prev=15,u(!1),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})))).apply(this,arguments)}if(Object(n.useEffect)((function(){return function(){v(!0)}}),[]),i)return Object(m.jsx)(pe,{message:"Activation in progress..."});return Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(h,{title:"Okay ".concat(c),icon:"monkey-emoji",children:[Object(m.jsx)("p",{className:le.a.subHeading,children:"How's this photo?"}),Object(m.jsx)("div",{className:le.a.avatarWrapper,children:Object(m.jsx)("img",{className:le.a.avatarImage,src:d,alt:"avatar"})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("input",{onChange:function(e){var a=e.target.files[0],n=new FileReader;n.readAsDataURL(a),n.onload=function(){p(n.result),t(ce(n.result))},console.log(e)},id:"avatarInput",type:"file",className:le.a.avatarInput}),Object(m.jsx)("label",{className:le.a.avatarLabel,htmlFor:"avatarInput",children:"Choose a different photo"})]}),Object(m.jsx)("div",{children:Object(m.jsx)(x,{onClick:function(){return g.apply(this,arguments)},text:"Next"})})]})})}},me=function(){var e=Object(n.useState)(1),t=Object(q.a)(e,2),a=t[0],c=t[1],r=be[a];return Object(m.jsx)("div",{className:"cardWrapper",children:Object(m.jsx)(r,{onNext:function(){c(a+1)}})})},he=a(13),fe=a.n(he),Oe=function(e){var t=e.onClose,a=Object(l.g)(),c=Object(n.useState)("open"),r=Object(q.a)(c,2),s=r[0],o=r[1],i=Object(n.useState)(""),u=Object(q.a)(i,2),j=u[0],d=u[1];function p(){return(p=Object(N.a)(_.a.mark((function e(){var t,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,j){e.next=3;break}return e.abrupt("return",alert("Please enter a topic"));case 3:return e.next=5,I({topic:j,roomType:s});case 5:t=e.sent,n=t.data,a.push("/room/".concat(n.id)),console.log(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)("div",{className:fe.a.modalMask,children:Object(m.jsxs)("div",{className:fe.a.modalBody,children:[Object(m.jsx)("button",{onClick:t,className:fe.a.closeButton,children:Object(m.jsx)("img",{src:"/images/close.png",alt:"close"})}),Object(m.jsxs)("div",{className:fe.a.modalHeader,children:[Object(m.jsx)("h3",{className:fe.a.heading,children:"Enter the topic to be discussed"}),Object(m.jsx)(Q,{fullwidth:"true",value:j,onChange:function(e){return d(e.target.value)}}),Object(m.jsx)("h2",{className:fe.a.subHeading,children:"Room Types"}),Object(m.jsxs)("div",{className:fe.a.roomTypes,children:[Object(m.jsxs)("div",{onClick:function(){o("open")},className:"".concat(fe.a.typeBox," ").concat("open"===s?fe.a.active:"","  "),children:[Object(m.jsx)("img",{src:"/images/globe.png",alt:"globe"}),Object(m.jsx)("span",{children:"Open"})]}),Object(m.jsxs)("div",{onClick:function(){o("social")},className:"".concat(fe.a.typeBox," ").concat("social"===s?fe.a.active:"","  "),children:[Object(m.jsx)("img",{src:"/images/social.png",alt:"social"}),Object(m.jsx)("span",{children:"Social"})]}),Object(m.jsxs)("div",{onClick:function(){o("private")},className:"".concat(fe.a.typeBox," ").concat("private"===s?fe.a.active:"","  "),children:[Object(m.jsx)("img",{src:"/images/lock-big.png",alt:"lock"}),Object(m.jsx)("span",{children:"Closed"})]})]})]}),Object(m.jsxs)("div",{className:fe.a.modalFooter,children:[Object(m.jsx)("h2",{children:"Start a room,open to everyone"}),Object(m.jsxs)("button",{onClick:function(){return p.apply(this,arguments)},className:fe.a.footerButton,children:[Object(m.jsx)("img",{src:"/images/celebration.png",alt:"celebration"}),Object(m.jsx)("span",{children:"Let's go"})]})]})]})})})},xe=a(30),ve=a.n(xe),ge=function(e){var t=e.room,a=Object(l.g)();return Object(m.jsxs)("div",{onClick:function(){a.push("/room/".concat(t.id))},className:ve.a.card,children:[Object(m.jsx)("h3",{className:ve.a.topic,children:t.topic}),Object(m.jsxs)("div",{className:"".concat(ve.a.speakers," ").concat(1===t.speakers.length?ve.a.singleSpeaker:""),children:[Object(m.jsx)("div",{className:ve.a.avatars,children:t.speakers.map((function(e){return Object(m.jsx)("img",{src:e.avatar,alt:"speaker-avatar"},e.id)}))}),Object(m.jsx)("div",{className:ve.a.names,children:t.speakers.map((function(e){return Object(m.jsxs)("div",{className:ve.a.nameWrapper,children:[Object(m.jsx)("span",{children:e.name}),Object(m.jsx)("img",{src:"/images/chat-bubble.png",alt:"chat-bubble"})]},e.id)}))})]}),Object(m.jsx)("div",{className:ve.a.peopleCount,children:Object(m.jsxs)("span",{children:[t.totalPeople,Object(m.jsx)("img",{src:"/images/user-icon.png",alt:"user-icon"})]})})]})},_e=a(31),Ne=a.n(_e),ke=function(){var e=Object(n.useState)(!1),t=Object(q.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),s=Object(q.a)(r,2),o=s[0],i=s[1];return Object(n.useEffect)((function(){(function(){var e=Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R.get("/api/rooms");case 2:t=e.sent,a=t.data,i(a);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:Ne.a.roomsHeader,children:[Object(m.jsxs)("div",{className:Ne.a.left,children:[Object(m.jsx)("span",{className:Ne.a.heading,children:"All voice rooms"}),Object(m.jsxs)("div",{className:Ne.a.searchBox,children:[Object(m.jsx)("img",{src:"/images/search-icon.png",alt:"search-icon"}),Object(m.jsx)("input",{type:"text",placeholder:"Search",className:Ne.a.searchInput})]})]}),Object(m.jsx)("div",{className:Ne.a.right,children:Object(m.jsxs)("button",{onClick:function(){c(!0)},className:Ne.a.startRoomButton,children:[Object(m.jsx)("img",{src:"/images/add-room-icon.png",alt:"add-room"}),Object(m.jsx)("span",{children:"Start a room"})]})})]}),Object(m.jsx)("div",{className:Ne.a.roomList,children:o.map((function(e){return Object(m.jsx)(ge,{room:e},e.id)}))})]}),a&&Object(m.jsx)(Oe,{onClose:function(){return c(!1)}})]})},ye=a(48),Ce=a(77),Re=function(){return Object(Ce.a)("http://localhost:5000",{"force new connection":!0,reconnectionAttempts:"Infinity",timeout:1e4,transports:["websocket"]})},we="join",Be="leave",Se="add-peer",We="relay-ice",Ie="relay-sdp",Ae="ice-candidate",Ee="session-description",Pe="remove-peer",Le="mute",Te="un-mute",He=a(76),Me=a.n(He),Fe=function(e,t){var a=function(e){var t=Object(n.useState)(e),a=Object(q.a)(t,2),c=a[0],r=a[1],s=Object(n.useRef)(),o=Object(n.useCallback)((function(e,t){s.current=t,r((function(t){return"function"===typeof e?e(t):e}))}),[]);return Object(n.useEffect)((function(){s.current&&(s.current(c),s.current=null)}),[c]),[c,o]}([]),c=Object(q.a)(a,2),r=c[0],s=c[1],i=Object(n.useRef)({}),u=Object(n.useRef)({}),l=Object(n.useRef)(null),j=Object(n.useRef)(null),d=Object(n.useRef)([]);Object(n.useEffect)((function(){j.current=Re()}),[]),Object(n.useEffect)((function(){d.current=r}),[r]),Object(n.useEffect)((function(){j.current.on(Le,(function(t){t.peerID;var a=t.userId;e(!0,a)})),j.current.on(Te,(function(t){t.peerID;var a=t.userId;e(!1,a)}));var e=function(e,t){var a=d.current.map((function(e){return e.id})).indexOf(t);console.log("idx",a);var n=JSON.parse(JSON.stringify(d.current));a>-1&&(n[a].muted=e,console.log("muuuu",n),s((function(e){return n})))}}),[]);var p=Object(n.useCallback)((function(e,t){void 0===r.find((function(t){return t.id===e.id}))&&s((function(t){return[].concat(Object(ye.a)(t),[e])}),t)}),[r,s]);Object(n.useEffect)((function(){return function(){var e=Object(N.a)(_.a.mark((function e(){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({audio:!0});case 2:l.current=e.sent;case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()().then((function(){p(Object(o.a)(Object(o.a)({},t),{},{muted:!0}),(function(){var a=i.current[t.id];a&&(a.volume=0,a.srcObject=l.current),j.current.emit(we,{roomId:e,user:t})}))})),function(){l.current.getTracks().forEach((function(e){e.stop()})),j.current.emit(Be,{roomId:e})}}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.peerId,n=t.createOffer,c=t.user,!(a in u.current)){e.next=3;break}return e.abrupt("return",console.warn("Already connected to ".concat(a)));case 3:if(u.current[a]=new RTCPeerConnection({iceServers:Me()()}),u.current[a].onicecandidate=function(e){j.current.emit(We,{peerId:a,icecandidate:e.candidate})},u.current[a].ontrack=function(e){var t=Object(q.a)(e.streams,1)[0];p(Object(o.a)(Object(o.a)({},c),{},{muted:!0}),(function(){if(i.current[c.id])i.current[c.id].srcObject=t;else var e=!1,a=setInterval((function(){i.current[c.id]&&(i.current[c.id].srcObject=t,e=!0),e&&clearInterval(a)}),1e3)}))},l.current.getTracks().forEach((function(e){u.current[a].addTrack(e,l.current)})),!n){e.next=14;break}return e.next=10,u.current[a].createOffer();case 10:return r=e.sent,e.next=13,u.current[a].setLocalDescription(r);case 13:j.current.emit(Ie,{peerId:a,sessionDescription:r});case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return j.current.on(Se,e),function(){j.current.off(Se)}}),[]),Object(n.useEffect)((function(){return j.current.on(Ae,(function(e){var t=e.peerId,a=e.icecandidate;a&&u.current[t].addIceCandidate(a)})),function(){j.current.off(Ae)}}),[]),Object(n.useEffect)((function(){var e=function(){var e=Object(N.a)(_.a.mark((function e(t){var a,n,c,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.peerId,n=t.sessionDescription,u.current[a].setRemoteDescription(new RTCSessionDescription(n)),"offer"!==n.type){e.next=9;break}return c=u.current[a],e.next=6,c.createAnswer();case 6:r=e.sent,c.setLocalDescription(r),j.current.emit(Ie,{peerId:a,sessionDescription:r});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return j.current.on(Ee,e),function(){j.current.off(Ee)}}),[]),Object(n.useEffect)((function(){return j.current.on(Pe,(function(e){var t=e.peerID,a=e.userId;u.current[t]&&u.current[t].close(),delete u.current[t],delete i.current[t],s((function(e){return e.filter((function(e){return e.id!==a}))}))})),function(){j.current.off(Pe)}}),[]);return{clients:r,provideRef:function(e,t){i.current[t]=e},handleMute:function(t,a){var n=!1,c=setInterval((function(){l.current&&(l.current.getTracks()[0].enabled=!t,t?j.current.emit(Le,{roomId:e,userId:a}):j.current.emit(Te,{roomId:e,userId:a}),n=!0),n&&clearInterval(c)}),200)}}},De=a(14),Ue=a.n(De),qe=function(){var e=Object(l.h)().id,t=Object(k.c)((function(e){return e.auth.user})),a=Fe(e,t),c=a.clients,r=a.provideRef,s=a.handleMute,o=Object(l.g)(),i=Object(n.useState)(null),u=Object(q.a)(i,2),j=u[0],d=u[1],p=Object(n.useState)(!0),b=Object(q.a)(p,2),h=b[0],f=b[1];Object(n.useEffect)((function(){s(h,t.id)}),[h]);var O=function(){o.push("/rooms")};return Object(n.useEffect)((function(){(function(){var t=Object(N.a)(_.a.mark((function t(){var a,n;return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,A(e);case 2:a=t.sent,n=a.data,d(n[0].topic);case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}})()()}),[e]),Object(m.jsxs)("div",{children:[Object(m.jsx)("div",{className:Ue.a.container,children:Object(m.jsxs)("button",{onClick:O,className:Ue.a.goBack,children:[Object(m.jsx)("img",{src:"/images/arrow-left.png",alt:"go back button"}),Object(m.jsx)("span",{children:"All voice rooms"})]})}),Object(m.jsxs)("div",{className:Ue.a.clientsWrap,children:[Object(m.jsxs)("div",{className:Ue.a.header,children:[Object(m.jsx)("h2",{className:Ue.a.topic,children:j}),Object(m.jsxs)("div",{className:Ue.a.actions,children:[Object(m.jsx)("button",{className:Ue.a.actionBtn,children:Object(m.jsx)("img",{src:"/images/palm.png",alt:"raise-hand"})}),Object(m.jsxs)("button",{onClick:O,className:Ue.a.actionBtn,children:[Object(m.jsx)("img",{src:"/images/win.png",alt:"leave"}),Object(m.jsx)("span",{children:"Leave quietly"})]})]})]}),Object(m.jsx)("div",{className:Ue.a.clientList,children:c.map((function(e){return Object(m.jsxs)("div",{className:Ue.a.client,children:[Object(m.jsxs)("div",{className:Ue.a.userHead,children:[Object(m.jsx)("audio",{ref:function(t){r(t,e.id)},autoPlay:!0}),Object(m.jsx)("img",{className:Ue.a.userAvatar,src:e.avatar,alt:"avatar"}),Object(m.jsx)("button",{onClick:function(){e.id===t.id&&f((function(e){return!e}))},className:Ue.a.micBtn,children:e.muted?Object(m.jsx)("img",{className:Ue.a.micBtn,src:"/images/mic-mute.png",alt:"mic"}):Object(m.jsx)("img",{className:Ue.a.micImg,src:"/images/mic.png",alt:"mic"})})]}),Object(m.jsx)("h4",{children:e.name})]},e.id)}))})]})]})};var ze=["children"],Je=["children"],Ve=["children"];var Ze=function(e){var t=e.children,a=Object(i.a)(e,ze),n=Object(k.c)((function(e){return e.auth})).isAuth;return Object(m.jsx)(l.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var a=e.location;return n?Object(m.jsx)(l.a,{to:{pathname:"/rooms",state:{from:a}}}):t}}))},Qe=function(e){var t=e.children,a=Object(i.a)(e,Je),n=Object(k.c)((function(e){return e.auth})),c=n.user,r=n.isAuth;return Object(m.jsx)(l.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var a=e.location;return r?r&&!c.activated?t:Object(m.jsx)(l.a,{to:{pathname:"/rooms",state:{from:a}}}):Object(m.jsx)(l.a,{to:{pathname:"/",state:{from:a}}})}}))},Xe=function(e){var t=e.children,a=Object(i.a)(e,Ve),n=Object(k.c)((function(e){return e.auth})),c=n.user,r=n.isAuth;return Object(m.jsx)(l.b,Object(o.a)(Object(o.a)({},a),{},{render:function(e){var a=e.location;return r?r&&!c.activated?Object(m.jsx)(l.a,{to:{pathname:"/activate",state:{from:a}}}):t:Object(m.jsx)(l.a,{to:{pathname:"/",state:{from:a}}})}}))},Ge=function(){return function(){var e=Object(n.useState)(!0),t=Object(q.a)(e,2),a=t[0],c=t[1],r=Object(k.b)();return Object(n.useEffect)((function(){Object(N.a)(_.a.mark((function e(){var t,a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,C.a.get("".concat("http://localhost:5000","/api/refresh"),{withCredentials:!0});case 3:t=e.sent,a=t.data,r(T(a)),c(!1),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0),c(!1);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})))()})),{loading:a}}().loading?Object(m.jsx)(pe,{message:"Loading,Please wait..."}):Object(m.jsxs)(u.a,{children:[Object(m.jsx)(U,{}),Object(m.jsxs)(l.d,{children:[Object(m.jsx)(Ze,{path:"/",exact:!0,children:Object(m.jsx)(v,{})}),Object(m.jsx)(Ze,{path:"/authenticate",children:Object(m.jsx)(ee,{})}),Object(m.jsx)(Qe,{path:"/activate",children:Object(m.jsx)(me,{})}),Object(m.jsx)(Xe,{path:"/rooms",children:Object(m.jsx)(ke,{})}),Object(m.jsx)(Xe,{path:"/room/:id",children:Object(m.jsx)(qe,{})})]})]})},Ye=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,118)).then((function(t){var a=t.getCLS,n=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;a(e),n(e),c(e),r(e),s(e)}))},Ke=Object(E.a)({reducer:{auth:M,activate:re}});s.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(k.a,{store:Ke,children:Object(m.jsx)(Ge,{})})}),document.getElementById("root")),Ye()},13:function(e,t,a){e.exports={modalMask:"AddRoomModal_modalMask__3Tq2D",modalBody:"AddRoomModal_modalBody__P3Pas",modalHeader:"AddRoomModal_modalHeader__7xFBD",roomTypes:"AddRoomModal_roomTypes__l8EBg",typeBox:"AddRoomModal_typeBox__2nHC9",active:"AddRoomModal_active__2Dz1Z",heading:"AddRoomModal_heading__2auq9",subHeading:"AddRoomModal_subHeading__1npSo",modalFooter:"AddRoomModal_modalFooter__3NUIC",footerButton:"AddRoomModal_footerButton__1MFVh",closeButton:"AddRoomModal_closeButton__2Zxcz"}},14:function(e,t,a){e.exports={container:"Room_container__26rMc",userHead:"Room_userHead__1bsNF",userAvatar:"Room_userAvatar__1q54s",goBack:"Room_goBack__1msCT",clientsWrap:"Room_clientsWrap__7K9mg",header:"Room_header__3oN5i",actions:"Room_actions__1LWVI",actionBtn:"Room_actionBtn__23RgT",topic:"Room_topic__UyGvH",client:"Room_client__1bC0o",clientList:"Room_clientList__1QjOs",micBtn:"Room_micBtn__dUdaT"}},16:function(e,t,a){e.exports={cardWrapper:"StepPhoneEmail_cardWrapper__1OeWy",buttonWrap:"StepPhoneEmail_buttonWrap__Gkwzs",tabButton:"StepPhoneEmail_tabButton__3Jh1e",active:"StepPhoneEmail_active__At4II",actionButtonWrap:"StepPhoneEmail_actionButtonWrap__12L8X",bottomPara:"StepPhoneEmail_bottomPara__1T9n2",midWrapper:"StepPhoneEmail_midWrapper__I-hUW"}},30:function(e,t,a){e.exports={card:"RoomCard_card__2zapk",speakers:"RoomCard_speakers__5ip2k",avatars:"RoomCard_avatars__1FeU7",names:"RoomCard_names__3tYmj",peopleCount:"RoomCard_peopleCount__1sQW7",singleSpeaker:"RoomCard_singleSpeaker__2nM-y"}},31:function(e,t,a){e.exports={roomsHeader:"Rooms_roomsHeader__q2Mz-",left:"Rooms_left__2ZvbR",heading:"Rooms_heading__1-ABI",searchBox:"Rooms_searchBox__3hzku",searchInput:"Rooms_searchInput__2ksH5",startRoomButton:"Rooms_startRoomButton__22QLQ",roomList:"Rooms_roomList__1bkjq"}},37:function(e,t,a){e.exports={subHeading:"StepAvatar_subHeading__1_6vW",avatarWrapper:"StepAvatar_avatarWrapper__1ecCW",avatarImage:"StepAvatar_avatarImage__1jgu5",avatarInput:"StepAvatar_avatarInput__3EcRG",avatarLabel:"StepAvatar_avatarLabel__2BnLp"}},42:function(e,t,a){e.exports={text:"Home_text__1prCO",cardWrapper:"Home_cardWrapper__380X_",signinWrapper:"Home_signinWrapper__3eNfh",hasInvite:"Home_hasInvite__2BBfy"}},43:function(e,t,a){e.exports={navbar:"Navigation_navbar__3FHZh",logoutButton:"Navigation_logoutButton__1pZYR",navRight:"Navigation_navRight__ZQo0k",avatar:"Navigation_avatar__3NXL7",brandStyle:"Navigation_brandStyle__17EYC"}},49:function(e,t,a){e.exports={card:"Card_card__1VOs9",headingWrapper:"Card_headingWrapper__1k4a8",heading:"Card_heading__2_qXQ"}},50:function(e,t,a){e.exports={cardWrapper:"StepOtp_cardWrapper__1Flc3",bottomPara:"StepOtp_bottomPara__1At4U",actionButtonWrap:"StepOtp_actionButtonWrap__Vl3vJ"}},56:function(e,t,a){e.exports={button:"Button_button__3nAJX",arrow:"Button_arrow__3RoVs"}},59:function(e,t,a){e.exports={message:"Loader_message__4_NZo",spinner:"Loader_spinner__26xgr",spin:"Loader_spin__1bMgJ"}},73:function(e,t,a){e.exports={input:"Textinput_input__2DHWe"}},74:function(e,t,a){e.exports={paragraph:"StepName_paragraph__1PZMy"}},82:function(e,t,a){}},[[117,1,2]]]);
//# sourceMappingURL=main.c4d70f84.chunk.js.map